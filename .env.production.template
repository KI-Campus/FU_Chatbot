# ============================================================================
# ARENA PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# 
# This template shows all required environment variables for production.
# 
# SETUP OPTIONS:
# 
# Option A: Use Azure Key Vault (RECOMMENDED for Production)
#   1. Set USE_KEY_VAULT=true
#   2. Store secrets in Azure Key Vault: kicwa-keyvault-prod
#   3. VM must have Managed Identity with Key Vault access
#   4. Leave secrets below empty - they'll be fetched from Key Vault
#
# Option B: Use .env file (for testing/staging)
#   1. Set USE_KEY_VAULT=false
#   2. Fill in all secrets below
#   3. Encrypt this file or store securely
#   4. Never commit to git!
#
# ============================================================================

# ----------------------------------------------------------------------------
# GENERAL SETTINGS
# ----------------------------------------------------------------------------
ENVIRONMENT=PRODUCTION
USE_KEY_VAULT=true
KEY_VAULT_NAME=kicwa-keyvault-prod

# Domain or Public IP (used by nginx, certbot, CORS)
# Examples: 
#   - With domain: DOMAIN_NAME=arena.ki-campus.org
#   - With IP only: DOMAIN_NAME=147.213.45.102
DOMAIN_NAME=arena.ki-campus.org

# Admin email for Let's Encrypt certificate notifications
CERTBOT_EMAIL=admin@ki-campus.org

# ----------------------------------------------------------------------------
# ARENA API SETTINGS
# ----------------------------------------------------------------------------

# API Key for Arena endpoints (/arena/*)
# Generate with: openssl rand -hex 32
# Key Vault Secret Name: ARENA-API-KEY
ARENA_API_KEY=

# CORS Origins (comma-separated, no spaces)
# For domain: https://arena.ki-campus.org
# For IP: https://147.213.45.102
# Multiple: https://domain1.com,https://domain2.org
CORS_ORIGINS=https://arena.ki-campus.org

# Storage path for arena votes (inside container)
STORAGE_PATH=/data/arena_votes.jsonl

# ----------------------------------------------------------------------------
# AZURE OPENAI SETTINGS
# ----------------------------------------------------------------------------
# Key Vault Secret Names: 
#   - AZURE-OPENAI-ENDPOINT
#   - AZURE-OPENAI-API-KEY
#   - AZURE-OPENAI-GPT4O-DEPLOYMENT-ID
#   - AZURE-OPENAI-GPT35-DEPLOYMENT-ID

AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_GPT4O_DEPLOYMENT_ID=
AZURE_OPENAI_GPT35_DEPLOYMENT_ID=
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# ----------------------------------------------------------------------------
# QDRANT VECTOR DATABASE
# ----------------------------------------------------------------------------
# Key Vault Secret Names:
#   - QDRANT-URL
#   - QDRANT-API-KEY

QDRANT_URL=
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=ki-campus-courses

# ----------------------------------------------------------------------------
# MONITORING (Optional)
# ----------------------------------------------------------------------------
# Langfuse for LLM observability
# Key Vault Secret Names:
#   - LANGFUSE-SECRET-KEY
#   - LANGFUSE-PUBLIC-KEY

LANGFUSE_SECRET_KEY=
LANGFUSE_PUBLIC_KEY=
LANGFUSE_HOST=https://cloud.langfuse.com

# ----------------------------------------------------------------------------
# DATABASE (Optional - for future PostgreSQL migration)
# ----------------------------------------------------------------------------
# Key Vault Secret Name: POSTGRES-PASSWORD

POSTGRES_PASSWORD=
POSTGRES_USER=arena_user
POSTGRES_DB=arena

# ----------------------------------------------------------------------------
# MOODLE DATA SOURCE (for course content updates)
# ----------------------------------------------------------------------------
# Key Vault Secret Names:
#   - DATA-SOURCE-PRODUCTION-MOODLE-URL
#   - DATA-SOURCE-PRODUCTION-MOODLE-TOKEN

DATA_SOURCE_PRODUCTION_MOODLE_URL=
DATA_SOURCE_PRODUCTION_MOODLE_TOKEN=

# ----------------------------------------------------------------------------
# SECURITY & RATE LIMITING
# ----------------------------------------------------------------------------

# Rate limits (requests per second)
RATE_LIMIT_VOTE=5
RATE_LIMIT_API=10
RATE_LIMIT_GENERAL=30

# Session timeout (seconds)
SESSION_TIMEOUT=3600

# Debug mode (MUST be false in production!)
DEBUG_MODE=false

# ============================================================================
# AZURE KEY VAULT SECRET NAME REFERENCE
# ============================================================================
# 
# If using Azure Key Vault, create these secrets:
#
# Arena:
#   - ARENA-API-KEY
#
# Azure OpenAI:
#   - AZURE-OPENAI-ENDPOINT
#   - AZURE-OPENAI-API-KEY
#   - AZURE-OPENAI-GPT4O-DEPLOYMENT-ID
#   - AZURE-OPENAI-GPT35-DEPLOYMENT-ID
#
# Qdrant:
#   - QDRANT-URL
#   - QDRANT-API-KEY
#
# Langfuse (optional):
#   - LANGFUSE-SECRET-KEY
#   - LANGFUSE-PUBLIC-KEY
#
# PostgreSQL (optional):
#   - POSTGRES-PASSWORD
#
# Moodle:
#   - DATA-SOURCE-PRODUCTION-MOODLE-URL
#   - DATA-SOURCE-PRODUCTION-MOODLE-TOKEN
#
# Note: Key Vault secret names use hyphens, env vars use underscores
#       The system automatically converts between them.
#
# ============================================================================
